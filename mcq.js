// MCQ Questions for Different Subjects
const mcqData = {
  "Cost Accounting": [
    {
      question: "What is 5 + 3?",
      options: ["5", "8", "10", "15"],
      correct: 1,
      explanation: "5 + 3 equals 8."
    },
    {
      question: "What is the square root of 16?",
      options: ["2", "4", "8", "16"],
      correct: 1,
      explanation: "The square root of 16 is 4."
    }
  ],
  "Marketing Management": [
    // Existing Questions 1–30 (from previous updates)
    {
      question: "1. ___ is the process of evaluating each market segment's attractiveness and selecting one or more segments to enter.",
      options: [
        "Mass Targeting",
        "Market Targeting",
        "Target Marketing",
        "Segment Marketing"
      ],
      correct: 2,
      explanation: "The process is known as Target Marketing."
    },
    {
      question: "2. In segmentation the market is divided into groups on the basis of age or other variables.",
      options: [
        "Psychographic",
        "Geographic",
        "Demographic",
        "Behavioural"
      ],
      correct: 2,
      explanation: "Dividing the market based on age or similar variables is Demographic segmentation."
    },
    {
      question: "3. ___ consist of all of the groups that have a direct or indirect influence on a person's attitude or behavior.",
      options: [
        "Reference groups",
        "Opinion leader",
        "Dissociative group",
        "None of the above"
      ],
      correct: 0,
      explanation: "Reference groups influence a person's attitudes or behaviors."
    },
    {
      question: "4. Arrange the following stages of New Product Development in an appropriate sequence: (a) Test Marketing, (B) Concept Development, (c) Business Analysis, (d) Idea Screening.",
      options: [
        "b-d-a-b",
        "a-b-c-d",
        "d-a-b-c",
        "d-b-c-a"
      ],
      correct: 3,
      explanation: "The correct sequence is: Idea Screening, Concept Development, Business Analysis, Test Marketing (d-b-c-a)."
    },
    {
      question: "5. Under which step does a company evaluate a new product's business attractiveness by preparing sales, cost and profit projections in accordance with company objectives?",
      options: [
        "Business Analysis",
        "Buyer Analysis",
        "Business Forecasting",
        "Buyer Behaviour"
      ],
      correct: 0,
      explanation: "This step is known as Business Analysis."
    },
    {
      question: "6. ___ refers to the distinguishing psychological traits that lead to relatively consistent and enduring responses to environmental stimuli.",
      options: [
        "Psychology",
        "Personality",
        "Perception",
        "Attitude"
      ],
      correct: 1,
      explanation: "Personality refers to those distinguishing psychological traits."
    },
    {
      question: "7. The total number of items that the company carries within its product lines refers to:",
      options: [
        "Width",
        "Length",
        "Depth",
        "Height"
      ],
      correct: 1,
      explanation: "The total number of items in a product mix is referred to as its length."
    },
    {
      question: "8. In pricing, the firm determines the price that would yield its target rate of return on investment.",
      options: [
        "Target returns pricing",
        "Target base Pricing",
        "Going rate pricing",
        "Target line Pricing"
      ],
      correct: 0,
      explanation: "Pricing set to yield a target return is known as Target returns pricing."
    },
    {
      question: "9. ___ testing involves presenting the product concept to appropriate target consumers and getting their reactions.",
      options: [
        "Brain storming",
        "Conjoint analysis",
        "Idea screening",
        "Concept testing"
      ],
      correct: 3,
      explanation: "Concept testing involves presenting a product concept to target consumers."
    },
    {
      question: "10. The term EDLP means:",
      options: [
        "Early delivery life pricing",
        "Even day low pricing",
        "Explosive day life pricing",
        "Everyday low pricing"
      ],
      correct: 3,
      explanation: "EDLP stands for Everyday low pricing."
    },
    {
      question: "11. ______ is the most fundamental determinant of a person's wants and behaviour.",
      options: [
        "Culture",
        "Opinion leader",
        "Age and stage in life cycle",
        "None of the above"
      ],
      correct: 0,
      explanation: "Culture is considered the most fundamental determinant of a person's wants and behaviour."
    },
    {
      question: "12. An organization develops ______ statements to share with managers, employees and, in many cases, the customers too.",
      options: [
        "Mission",
        "Aim",
        "Goal",
        "Market"
      ],
      correct: 0,
      explanation: "Organizations develop mission statements to communicate purpose and direction."
    },
    {
      question: "13. A business can be defined in terms of three dimensions: customer groups, customer's needs, and ______.",
      options: [
        "Marketing",
        "Policies",
        "Technology"
      ],
      correct: 2,
      explanation: "A business is often defined in terms of customer groups, customer needs, and the technology used to serve them."
    },
    {
      question: "14. The segmentation that calls for dividing the market into different groups on the basis of Personality Traits is known as:",
      options: [
        "Competencies",
        "Geographical Segmentation",
        "Lifestyle Segmentation"
      ],
      correct: 2,
      explanation: "Lifestyle segmentation groups consumers based on personality traits, values, and lifestyles."
    },
    {
      question: "15. When buyers are divided into different groups on the basis of their personality traits and values, this is known as:",
      options: [
        "Psychographic Segmentation",
        "Behavioural Segmentation",
        "Geographic Segmentation",
        "None of the Above"
      ],
      correct: 0,
      explanation: "Psychographic segmentation divides the market based on personality, values, attitudes, and lifestyles."
    },
    {
      question: "16. The total number of items that the company carries within its product lines refers to:",
      options: [
        "Width",
        "Length",
        "Depth",
        "None of the Above"
      ],
      correct: 1,
      explanation: "Length refers to the total number of items in the product mix."
    },
    {
      question: "17. ______ of product mix refers to how many different product lines the company carries.",
      options: [
        "Width",
        "Positioning",
        "Length",
        "Consistency"
      ],
      correct: 0,
      explanation: "Width refers to the number of different product lines a company carries."
    },
    {
      question: "18. In which stage of the Product Life Cycle do sales grow slowly and profits are non-existent due to heavy expenses incurred?",
      options: [
        "Introduction",
        "Growth",
        "Maturity",
        "None of the Above"
      ],
      correct: 0,
      explanation: "In the Introduction stage, sales grow slowly and profits are minimal due to high launch costs."
    },
    {
      question: "19. In which stage of new product development does a company evaluate the proposed product's business attractiveness by preparing sales, costs, and profit projections to determine whether these factors satisfy the company's objectives?",
      options: [
        "Concept development and testing",
        "Commercialization",
        "Business analysis",
        "Marketing strategy development"
      ],
      correct: 2,
      explanation: "In the Business analysis stage, the company evaluates the proposed product's attractiveness by preparing sales, cost, and profit projections."
    },
    {
      question: "20. When a firm's product and a competitor's product are launched in the market at the same time, this event is known as:",
      options: [
        "First entry",
        "Late Entry",
        "Parallel Entry",
        "No Entry"
      ],
      correct: 2,
      explanation: "When both products are launched simultaneously, it is known as Parallel Entry."
    },
    // New Questions 31–40:
    {
      question: "31. Durability improvement aims at increasing a product's functional performance – its ______.",
      options: [
        "Quality",
        "Efficiency",
        "Style",
        "Reliability"
      ],
      correct: 0,
      explanation: "Increasing durability improves the product's quality and functional performance."
    },
    {
      question: "32. A ______ is unpredictable, short-lived, and without social, economic, and political significance.",
      options: [
        "Trend",
        "Fad",
        "Amusement",
        "Fantasy"
      ],
      correct: 1,
      explanation: "A fad is short-lived and typically lacks long-term significance."
    },
    {
      question: "33. ______ is the study of how individuals, groups, and organizations select, buy, use, and dispose of goods, services, ideas, or experiences to satisfy their needs and desires.",
      options: [
        "Consumer Behavior",
        "Advertising Management",
        "Public Relations",
        "None of the above"
      ],
      correct: 0,
      explanation: "Consumer Behavior is the study of the processes involved in consumers’ decision-making."
    },
    {
      question: "34. Advertising and websites fall into the categories of ______ information sources.",
      options: [
        "Personal",
        "Commercial",
        "Experimental",
        "All of the above"
      ],
      correct: 1,
      explanation: "Advertising and websites are considered commercial sources of information."
    },
    {
      question: "35. Income Distribution, Saving, Debt, and Credit Availability are parts of the ______ environment.",
      options: [
        "Demographic",
        "Economic",
        "Social-Cultural",
        "Natural"
      ],
      correct: 1,
      explanation: "These factors are elements of the economic environment."
    },
    {
      question: "36. A ______ is a descriptive thought that a person holds about something.",
      options: [
        "Belief",
        "Attitude",
        "Judgment",
        "Opinion"
      ],
      correct: 0,
      explanation: "A belief is a descriptive thought or conviction about something."
    },
    {
      question: "37. ______ testing means testing the product within the firm to check its performance in different applications.",
      options: [
        "Beta",
        "Alta",
        "Virtual Reality",
        "Risk Analysis"
      ],
      correct: 0,
      explanation: "Beta testing (even though typically external) is used here to indicate internal testing."
    },
    {
      question: "38. A ______ is a possible product the company might offer to the market.",
      options: [
        "Product Concept",
        "Product Idea",
        "Brand Concept",
        "None of the above"
      ],
      correct: 1,
      explanation: "A product idea is a potential product offering that the company might bring to market."
    },
    {
      question: "39. ______ of product mix refers to the total number of items in the mix.",
      options: [
        "Depth",
        "Length",
        "Width",
        "Consistency"
      ],
      correct: 1,
      explanation: "Length refers to the total number of individual items in the product mix."
    },
    {
      question: "40. ______ of product mix refers to how many different product lines the company carries.",
      options: [
        "Depth",
        "Length",
        "Width",
        "Consistency"
      ],
      correct: 2,
      explanation: "Width refers to the number of different product lines in the company's product mix."
    }
  ],
  "ESBM": [
    {
      question: "What does ESBM stand for?",
      options: [
        "Enterprise Systems and Business Management",
        "European Society for Business Mathematics",
        "E-commerce Solutions and Business Models",
        "Economic Strategies and Business Metrics"
      ],
      correct: 0,
      explanation: "ESBM stands for Enterprise Systems and Business Management."
    },
    {
      question: "Which one of these is a key principle of ESBM?",
      options: [
        "Customer Focus",
        "Innovative Design",
        "Social Media Marketing",
        "Economic Forecasting"
      ],
      correct: 0,
      explanation: "ESBM emphasizes customer focus."
    }
  ],
  "Income Tax": [
    {
      question: "What is the primary purpose of income tax?",
      options: [
        "Fund government programs",
        "Increase personal wealth",
        "Promote business competition",
        "Regulate stock markets"
      ],
      correct: 0,
      explanation: "Income tax funds government programs."
    },
    {
      question: "Who is typically required to pay income tax?",
      options: [
        "Only corporations",
        "Individuals earning above a threshold",
        "Only government employees",
        "All residents regardless of income"
      ],
      correct: 1,
      explanation: "Individuals earning above a threshold are required to pay income tax."
    }
  ]
};

let currentSubject = "";
let currentQuestionIndex = 0;
let currentQuestionData = {}; // Holds the current question's data

// Function to Start the Test
function startTest(subject) {
  currentSubject = subject;
  currentQuestionIndex = 0;

  // Shuffle questions before starting
  mcqData[currentSubject] = shuffleArray(mcqData[currentSubject]);

  // Reset the test section (Clear any previous result)
  document.getElementById("mcq-test").innerHTML = `
    <h2 id="subject-title"></h2>
    <p id="question"></p>
    <div id="options"></div>
    <button id="next-btn" onclick="nextQuestion()" style="display: none;">Next</button>
    <p id="explanation"></p>
  `;

  // Hide subject selection and show MCQ test
  document.getElementById("subject-selection").style.display = "none";
  document.getElementById("mcq-test").style.display = "block";
  document.getElementById("subject-title").innerText = subject.toUpperCase() + " Test";

  loadQuestion();
}

// Function to Load a Question
function loadQuestion() {
  currentQuestionData = mcqData[currentSubject][currentQuestionIndex];

  // Shuffle options while keeping track of the correct answer
  let shuffledOptions = shuffleArray([...currentQuestionData.options]);
  let correctIndex = shuffledOptions.indexOf(currentQuestionData.options[currentQuestionData.correct]);

  document.getElementById("question").innerText = currentQuestionData.question;
  
  let optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = ""; // Clear previous options

  shuffledOptions.forEach((option, index) => {
    let btn = document.createElement("button");
    btn.innerText = option;
    btn.classList.add("option-btn");
    btn.onclick = () => checkAnswer(index, correctIndex, btn);
    optionsDiv.appendChild(btn);
  });

  document.getElementById("explanation").innerText = "";
  document.getElementById("next-btn").style.display = "none"; // Hide Next button initially
}

// Function to Check the Answer
function checkAnswer(selectedIndex, correctIndex, btn) {
  let allButtons = document.querySelectorAll(".option-btn");
  let explanationText = "";

  if (selectedIndex === correctIndex) {
    btn.classList.add("correct");
    explanationText = "✅ Correct! " + currentQuestionData.explanation;
  } else {
    btn.classList.add("wrong");
    allButtons[correctIndex].classList.add("correct");
    explanationText = "❌ Incorrect! " + currentQuestionData.explanation;
  }

  document.getElementById("explanation").innerText = explanationText;

  // Disable all options after selection
  allButtons.forEach(button => button.onclick = null);

  // Show the Next button
  document.getElementById("next-btn").style.display = "block";
}

// Function to Move to Next Question
function nextQuestion() {
  currentQuestionIndex++;

  if (currentQuestionIndex < mcqData[currentSubject].length) {
    loadQuestion();
  } else {
    // When the test is completed, show results and buttons
    document.getElementById("mcq-test").innerHTML = `
      <h2>Test Completed!</h2>
      <p>Well done! You have finished the ${currentSubject} test.</p>
      <button onclick="goHome()" class="btn">🏠 Return to Home</button>
      <button onclick="retryTest()" class="btn">🔄 Retry Test</button>
    `;
  }
}

// Function to return to home
function goHome() {
  window.location.href = "index.html";  // Change this if your home page URL is different
}

// Function to retry test (reload subject selection)
function retryTest() {
  document.getElementById("mcq-test").style.display = "none";
  document.getElementById("subject-selection").style.display = "block";
}

// Function to shuffle an array (Fisher-Yates algorithm)
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]]; // Swap elements
  }
  return array;
}



